{% extends 'base.html' %}
{% block page_title %}View Instruments{% endblock %}
{% block content %}
<h1>View Instruments</h1>
<!--if no instruments in database, display that information-->
{% if instruments|length < 1 %}
    <h3>There are currently no instruments to display</h3>
{%else %}
<div class = "container">
    <div class="row">
        <!--Create a card for each instruent in the database-->
        {% for instrument in instruments %}
            <div class="col-sm-3">
                <div class="card">
                    <!--If the instrument has an image, display it-->
                    {% if instrument.get_image %}
                        <img src = "{{bucket}}{{instrument.get_image.image}}">
                    {% endif %}
                    <!--<img src="{{INSTRUMENT_IMAGE_URL}}{{ product.image }}" class="review-img" alt="Coffee-Capsule">-->
                    <h5>Brand:{{ instrument.brand}}</h5>
                    <h5>Model:{{ instrument.name}}</h5>
                    <h5>{{ instrument.instrument_type }}</h5>
                    <span>Cost:{{ instrument.cost }}</span><span>Stock:{{ instrument.stock_amount }}</span>
                    <h6>Product Description</h6>
                    <p>{{ instrument.description|truncatechars:7}}</p>
                    <a href = "{% url 'instrument:view' instrument.id %}"><button class = "btn btn-success"><i class="fas fa-eye"></i>More Info</button></a>
                    <!--Form below will allow user to add multiple amounts of instrument to cart-->
                    {% if instrument.stock_amount > 0 %}
                        <form action = "{% url 'cart:add' instrument.id %}" method = "POST">
                            {% csrf_token %}
                            <input type="number" name="quantity" min = "0" max = "{{instrument.stock_amount}}" value = "0"/>
                            <input class = "btn btn-primary" type="submit" value="Add to Cart"/>
                        </form>
                    <!--If stock is 0 display a button requesting to be notified when product is back in stock-->
                    {% else %}
                        <a href = "{% url 'sns_notifications:stock_notify' instrument.id %}">
                            <button class = "btn btn-warning">Notify me when stock arrives</button>
                        </a>
                    {% endif %}
				</div>
			</div>
		{% endfor %}
{% endif %}
{% endblock content %}